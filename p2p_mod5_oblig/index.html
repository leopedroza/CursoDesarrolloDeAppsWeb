<!DOCTYPE html> 
<html>
	<head>
		<title>Bienvenido(a) a la calculadora de José Leonardo Pedroza Pérez</title>
		<meta charset="utf-8">
		<script src="http://code.jquery.com/jquery-2.2.2.min.js"></script>
		<script type="text/javascript">
			$(function() {
			var num, acc, op = "";
				/* Clear */
				$("#num").on("click", 
					function(){ $("#num").val("");}
				);
				
				$("#cuadrado").on("click", 
					function() {
						num = $("#num");
						num.val( num.val() * num.val() );
						$("#num").focus();
					}
				);
				
				$("#inverso").on("click", 
					function() {
						num = $("#num");
						num.val( 1 / num.val() );
						$("#num").focus();
					}
				);
				
				$("#raiz").on("click", 
					function() {
						num = $("#num");
						num.val( Math.sqrt( num.val() ) );
						$("#num").focus();
					}
				);
				
				$("#parte_entera").on("click", 
					function() {
						num = $("#num");
						if( num.val() > 0 ) {
							num.val( Math.floor( num.val() ) );
						} else {
							num.val( -Math.ceil( num.val() ) );
						}
						$("#num").focus();
					}
				);
				
				$("#potencia_2_a_N").on("click", 
					function() {
						num = $("#num");
						num.val( Math.pow( 2, num.val() ) );
						$("#num").focus();
					}
				);
				
				$("#factorial").on("click", 
					function() {
						num = $("#num");
						var res = num.val();
						if( $.isNumeric( num.val() ) ) {
							var counter = num.val();
							counter--;
							while( counter > 1 ) {
								res*= counter;
								counter--;
								if( !$.isNumeric( num.val() ) ) {
									break;
								}
							} 
						} else {
							res = "ERROR: No es un número!" ;
						}
						num.val( res );
						$("#num").focus();
					}
				);
				
				$("#sumatorio").on("click", 
					function() {
						num = $("#num");
						var lista = num.val().split(",");
						var i = 0;
						acc = 0;
						while ( i < lista.length ) {
							acc = acc + (+lista[i]);
							i++;
						}
						num.val( acc );
						$("#num").focus();
					}
				);
				
				$("#producto").on("click", 
					function() {
						num = $("#num");
						var lista = num.val().split(",");
						var i = 0;
						acc = 1;
						while ( i < lista.length ) {
							acc = acc * (+lista[i]);
							i++;
						}
						num.val( acc );
						$("#num").focus();
					}
				);
				
				$("#sumar").on("click", 
					function() {
						num = $("#num");
						acc = num.val();
						op = "+";
						num.val("");
						$("#num").focus();
					}
				);
				
				$("#restar").on("click", 
					function() {
						num = $("#num");
						acc = num.val();
						op = "-";
						num.val("");
						$("#num").focus();
					}
				);
				
				$("#multiplicar").on("click", 
					function() {
						num = $("#num");
						acc = num.val();
						op = "*";
						num.val("");
						$("#num").focus();
					}
				);
				
				$("#dividir").on("click", 
					function() {
						num = $("#num");
						acc = num.val();
						op = "/";
						num.val("");
						$("#num").focus();
					}
				);
				
				$("#elevado").on("click", 
					function() {
						num = $("#num");
						acc = num.val();
						op = "^";
						num.val("");
						$("#num").focus();
					}
				);
				
				$("#calcular").on("click", 
					function() {
						var res = 0;
						num = $("#num");
						var val = num.val();
						switch (op) {
							case "+":
								res = +acc + +val;
								break;
							case "-":
								res = +acc - +val;
								break;
							case "*":
								res = +acc * +val;
								break;
							case "/":
								res = +acc / +val;
								break;
							case "^":
								res = Math.pow( +acc, +val );
								break;
							default:
								res = "ERROR!";
						}
						num.val( res );
						op = "";
						$("#num").focus();
					}
				);
			});
		</script>
	</head>
	<body onload="$('#num').focus();">
		<p>
			Número: 
			<input type="text" size="12" id="num">
			<button id="calcular">=</button>
		<p>
		<p>
			<h3>Operaciones unitarias</h3>
			<button id="cuadrado">x<sup>2</sup></button>
			<button id="inverso">1/x</button>
			<button id="raiz">&radic;</button>
			<button id="parte_entera">Parte entera</button>
			<button id="potencia_2_a_N">2<sup>n</sup></button>
			<button id="factorial">n!</button>
		</p>
		<p>
			<h3>Operaciones binarias</h3>
			<button id="sumar">+</button>
			<button id="restar">-</button>
			<button id="multiplicar">X</button>
			<button id="dividir">/</button>
			<button id="elevado">x<sup>y</sup></button>
		</p>
		<p>
			<h3>Operaciones con N operandos en formato CSV</h3>
			<button id="sumatorio">&Sigma; x</button>
			<button id="producto">&Pi; x</button>
		</p>
	</body>
</html>